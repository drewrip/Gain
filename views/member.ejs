<html>
    <h1>Studio <%= confCode %></h1>

    <audio id="player" controls></audio>
</html>
<script>
    var player = document.getElementById('player');
    var Socket = new WebSocket("ws://localhost");
    var handleSuccess = function(stream) {
       var context = new AudioContext();
       var source = context.createMediaStreamSource(stream);
       var processor = context.createScriptProcessor(1024, 1, 1);

       source.connect(processor);
       processor.connect(context.destination);

       processor.onaudioprocess = function(e) {
         // Do something with the data, i.e Convert this to WAV
         Socket.send(e.inputBuffer)
       };
     };

     navigator.mediaDevices.getUserMedia({ audio: true, video: false })
         .then(handleSuccess);

</script>
